<!DOCTYPE html>
<html>

<head>
  <title>Gamepad.js</title>
  <style>
    body {
      font-family: system-ui;
    }
    
    .rumble-buttons.disabled {
      opacity: 0.5;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <h1 class="message">Press something on a controller</h1>
  <hr>
  
  <h2>Rumble</h2>
  <div class="rumble-buttons disabled">
    <button onclick="controllers.vibrate({ preset: 'mild' }, 250)">Mild</button>
    <button onclick="controllers.vibrate({ preset: 'medium' }, 500)">Medium</button>
    <button onclick="controllers.vibrate({ preset: 'strong' }, 1000)">Strong</button>
  </div>
  
  <script src="Gamepad.js"></script>
  <script>
    
    const controllers = Gamepad.controllers;
    
    const message = document.querySelector('.message');
    const rumbleButtons = document.querySelector('.rumble-buttons');
    
    const buttons = Object.values(Gamepad.buttonMap);
    
    buttons.forEach(button => {
    
      controllers.on.press(button, (value) => {
        
        message.textContent = button + '! ' + value;
        
      });
      
    });
    
    controllers.on.move('joystick-left', (value) => {
      
      console.log('Moved left joystick!', value.x, value.y);
      
    });
    
    controllers.on.move('joystick-right', (value) => {
      
      console.log('Moved right joystick!', value.x, value.y);
      
    });
    
    controllers.on.connect((controller) => {
      
      console.log('Controller connected!', controller);
      message.textContent = 'Controller connected';
      
      rumbleButtons.classList.remove('disabled');
      
    });
    
    controllers.on.disconnect((controller) => {
      
      console.log('Controller disconnected!', controller);
      message.textContent = 'Controller disconnected';
      
      rumbleButtons.classList.add('disabled');
      
    });
    
  </script>
</body>

</html>
